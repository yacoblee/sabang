<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="lssBscFieldBookDAO">

	<resultMap id="lssBscfieldBook" type="or.sabang.sys.lss.bsc.service.LssBscFieldBookVO">
		<result property="id" column="id" />
		<result property="mst_corpname" column="mst_corpname" />
		<result property="mst_partname" column="mst_partname" />
		<result property="mst_admin_user" column="mst_admin_user" />
		<result property="mst_create_user" column="mst_create_user" />
		<result property="mst_registered" column="mst_registered" />
		<result property="mst_status" column="mst_status" />
		<result property="mst_password" column="mst_password" />
		<result property="mst_adminpwd" column="mst_adminpwd" />
		<result property="mst_readpwd" column="mst_readpwd" />
		<result property="mst_access" column="mst_access" />
		<result property="totcnt" column="totcnt" />
	</resultMap>
	
	<resultMap id="lssBscfieldBookItem" type="or.sabang.sys.lss.bsc.service.LssBscFieldBookItemVO">
		<result property="MST_ID" column="mst_id" />
		<result property="LOGIN_ID" column="login_id" />
		<result property="_FID" column="_fid" />
		<result property="_LON" column="_lon" />
		<result property="_LAT" column="_lat" />
		<result property="_DATA" column="_data" />
		<result property="_KEYWORD" column="_keyword" />
		<result property="_LABEL" column="_label" />
		<result property="_STYLE" column="_style" />
		<result property="_MEMO" column="_memo" />
		<result property="_TAG1" column="_tag1" />
		<result property="_TAG2" column="_tag2" />
		<result property="_REG_DATE" column="_reg_date" />
		<result property="_UPD_DATE" column="_upd_date" />
		<result property="ATTR" column="ATTR" />
	</resultMap>

	<!-- 공유방 목록조회 -->
	<select id="selectLssBscFieldBookList" resultMap="lssBscfieldBook" parameterType="or.sabang.sys.lss.bsc.service.LssBscFieldBookVO">
		<![CDATA[
			SELECT T1.ID AS ID
			     , T1.MST_CORPNAME AS MST_CORPNAME
			     , T1.MST_PARTNAME AS MST_PARTNAME
			     , T1.MST_CREATE_USER AS MST_CREATE_USER
			     , T1.MST_ADMIN_USER AS MST_ADMIN_USER
			     , REPLACE(SPLIT_PART(T1.MST_REGISTERED, ' ',1),'/','-')  AS MST_REGISTERED
			     , (SELECT COUNT(*) FROM TN_FEIS_BSC_FIELDINFO T2 WHERE T2.MST_ID = T1.ID) TOTCNT
			FROM  TN_FEIS_BSC_CNRSSPCE T1
			WHERE  1=1
		]]>
			<if test="id != null and id != ''">	<![CDATA[ AND
				T1.ID = CAST(#{id} AS INT) ]]>
			</if>
			<if test="svy_year != null and svy_year != ''">	<![CDATA[ AND
				SPLIT_PART((SPLIT_PART(T1.MST_REGISTERED, ' ',1)),'/',1) = #{svy_year} ]]>
			</if>
			<if test="mst_corpname != null and mst_corpname != ''">	<![CDATA[ AND
				T1.MST_CORPNAME = #{mst_corpname} ]]>
			</if>
			<if test="mst_partname != null and mst_partname != ''">	<![CDATA[ AND
				T1.MST_PARTNAME like CONCAT ('%', #{mst_partname},'%') ]]>
			</if>
			<if test="mst_create_user != null and mst_create_user != ''">	<![CDATA[ AND
				T1.MST_CREATE_USER like CONCAT ('%', #{mst_create_user},'%') ]]>
			</if>
  		ORDER BY T1.MST_REGISTERED DESC, T1.ID DESC
		LIMIT #{recordCountPerPage} OFFSET #{firstIndex}
	</select>
	
	<!-- 공유방 갯수조회 -->
	<select id="selectLssBscFieldBookListTotCnt" parameterType="or.sabang.sys.lss.bsc.service.LssBscFieldBookVO" resultType="int">
		<![CDATA[
			SELECT  COUNT(*) TOTCNT
			FROM  TN_FEIS_BSC_CNRSSPCE T1
			WHERE  1=1
		]]>
			<if test="id != null and id != ''">	<![CDATA[ AND
				T1.ID = CAST(#{id} AS INT) ]]>
			</if>
			<if test="svy_year != null and svy_year != ''">	<![CDATA[ AND
				SPLIT_PART((SPLIT_PART(T1.MST_REGISTERED, ' ',1)),'/',1) = #{svy_year} ]]>
			</if>
			<if test="mst_corpname != null and mst_corpname != ''">	<![CDATA[ AND
				T1.MST_CORPNAME = #{mst_corpname} ]]>
			</if>
			<if test="mst_partname != null and mst_partname != ''">	<![CDATA[ AND
				T1.MST_PARTNAME like CONCAT ('%', #{mst_partname},'%') ]]>
			</if>
			<if test="mst_create_user != null and mst_create_user != ''">	<![CDATA[ AND
				T1.MST_CREATE_USER like CONCAT ('%', #{mst_create_user},'%') ]]>
			</if>
	</select>
	
	<!-- 공유방 상세조회 -->
	<select id="selectLssBscFieldBookDetail" parameterType="java.util.Map" resultMap="lssBscfieldBook">
		<![CDATA[
			SELECT  T1.ID AS ID
			     ,  T1.MST_CORPNAME AS MST_CORPNAME
			     ,  T1.MST_PARTNAME AS MST_PARTNAME
			     ,  T1.MST_CREATE_USER AS MST_CREATE_USER
			     ,  T1.MST_ADMIN_USER AS MST_ADMIN_USER
			     ,  T1.MST_REGISTERED AS MST_REGISTERED
			     ,  T1.MST_STATUS AS MST_STATUS
			     ,  T1.MST_PASSWORD AS MST_PASSWORD
			     ,  T1.MST_ADMINPWD AS MST_ADMINPWD
			     ,  T1.MST_READPWD AS MST_READPWD
			     ,  T1.MST_ACCESS AS MST_ACCESS
			     ,  (SELECT COUNT(*) FROM TN_FEIS_BSC_FIELDINFO T2 WHERE T2.MST_ID = T1.ID) AS TOTCNT
			FROM  TN_FEIS_BSC_CNRSSPCE T1
			WHERE  1=1
			AND T1.ID = #{id}
		]]>
	</select>
	
	<!-- 공유방 등록 -->	
	<insert id="insertCnrsSpce" parameterType="java.util.Map" useGeneratedKeys="true" keyProperty="id">
		INSERT INTO TN_FEIS_BSC_CNRSSPCE
		(
			MST_CORPNAME
			, MST_PARTNAME
			, MST_CREATE_USER
			, MST_ADMIN_USER		
			, MST_REGISTERED
			, MST_PASSWORD
			, MST_ADMINPWD
			, MST_READPWD
		) VALUES (
			#{mst_corpname}
			, #{mst_partname}
			, #{mst_create_user}
			, #{mst_admin_user}
			, to_char(now(),'YYYY/MM/DD HH24:MI:SS')
			, #{mst_password}
			, #{mst_adminpwd}
			, #{mst_readpwd}
	    )
	</insert>
	
	<insert id="insertStripLand" parameterType="java.util.List">
		INSERT INTO TN_FEIS_BSC_FIELDINFO
		( MST_ID,LOGIN_ID,SVY_KEYWORD,SVY_LABEL,SVY_LON,SVY_LAT,SVY_DATA,SVY_ATTR,CREAT_DT,SVY_MEMO )
		VALUES
		<foreach collection="list" item="item" separator=",">
		( 
			CAST(#{item.MST_ID} AS INT)
			, #{item.LOGIN_ID}
			, #{item._KEYWORD}
			, #{item._LABEL}
			, CAST(ST_X(ST_TRANSFORM(ST_SetSRID(ST_MakePoint(#{item.LONDD},#{item.LATDD}),4326),5186)) AS FLOAT)
			, CAST(ST_Y(ST_TRANSFORM(ST_SetSRID(ST_MakePoint(#{item.LONDD},#{item.LATDD}),4326),5186)) AS FLOAT)
			, ST_ASTEXT(ST_Transform(ST_SetSRID(ST_MakePoint(#{item.LONDD},#{item.LATDD}),4326),5186))
			, #{item.ATTR}
			, now()
			, #{item._MEMO}
		)
		ON CONFLICT ON CONSTRAINT TN_FEIS_BSC_FIELDINFO_UN
		DO UPDATE
		SET SVY_KEYWORD = #{item._KEYWORD}
			, SVY_LON = CAST(ST_X(ST_TRANSFORM(ST_SetSRID(ST_MakePoint(#{item.LONDD},#{item.LATDD}),4326),5186)) AS FLOAT)
			, SVY_LAT = CAST(ST_Y(ST_TRANSFORM(ST_SetSRID(ST_MakePoint(#{item.LONDD},#{item.LATDD}),4326),5186)) AS FLOAT)
			, SVY_DATA = ST_ASTEXT(ST_Transform(ST_SetSRID(ST_MakePoint(#{item.LONDD},#{item.LATDD}),4326),5186))
			, SVY_ATTR = #{item.ATTR}
			, LAST_UPDT_PNTTM = now()
			, SVY_MEMO = #{item._MEMO}
		</foreach>
	</insert>
	
	<insert id="insertStripLandVO" parameterType="or.sabang.sys.lss.bsc.service.LssBscFieldBookItemVO">
		INSERT INTO TN_FEIS_BSC_FIELDINFO
		( MST_ID,LOGIN_ID,SVY_KEYWORD,SVY_LABEL,SVY_LON,SVY_LAT,SVY_DATA,SVY_ATTR,CREAT_DT,LAST_UPDT_PNTTM,SVY_MEMO )
		VALUES
		(
			CAST(#{MST_ID} AS INT)
			, #{LOGIN_ID}
			, #{_KEYWORD}
			, #{_LABEL}
			, CAST(ST_X(ST_TRANSFORM(ST_SetSRID(ST_MakePoint(#{LONDD},#{LATDD}),4326),5186)) AS FLOAT)
			, CAST(ST_Y(ST_TRANSFORM(ST_SetSRID(ST_MakePoint(#{LONDD},#{LATDD}),4326),5186)) AS FLOAT)
			, ST_ASTEXT(ST_Transform(ST_SetSRID(ST_MakePoint(#{LONDD},#{LATDD}),4326),5186))
			, #{ATTR}
			, now()
			, now()
			, #{_MEMO}
		)
		ON CONFLICT ON CONSTRAINT TN_FEIS_BSC_FIELDINFO_PKEY
		DO UPDATE
		SET SVY_KEYWORD = #{_KEYWORD}
			, SVY_LON = CAST(ST_X(ST_TRANSFORM(ST_SetSRID(ST_MakePoint(#{LONDD},#{LATDD}),4326),5186)) AS FLOAT)
			, SVY_LAT = CAST(ST_Y(ST_TRANSFORM(ST_SetSRID(ST_MakePoint(#{LONDD},#{LATDD}),4326),5186)) AS FLOAT)
			, SVY_DATA = ST_ASTEXT(ST_Transform(ST_SetSRID(ST_MakePoint(#{LONDD},#{LATDD}),4326),5186))
			, SVY_ATTR = #{ATTR}
			, LAST_UPDT_PNTTM = now()
			, SVY_MEMO = #{_MEMO}
	</insert>
	
	<!-- 공유방 대상지 추가 -->	
<!-- 	<insert id="insertCnrsSpceSld" parameterType="or.sabang.sys.lss.bsc.service.LssBscFieldBookItemVO"> -->
<!-- 		<![CDATA[ -->
<!-- 			INSERT INTO TN_FEIS_BSC_FIELDINFO -->
<!-- 			( -->
<!-- 				MST_ID -->
<!-- 				, LOGIN_ID -->
<!-- 				, _KEYWORD -->
<!-- 				, _LABEL -->
<!-- 				, _LON -->
<!-- 				, _LAT -->
<!-- 				, _DATA -->
<!-- 				, ATTR -->
<!-- 				, _REG_DATE -->
<!-- 			) VALUES ( -->
<!-- 				CAST(#{MST_ID} AS INT) -->
<!-- 				, #{LOGIN_ID} -->
<!-- 				, #{_KEYWORD} -->
<!-- 				, #{_LABEL} -->
<!-- 				, CAST(ST_X(ST_TRANSFORM(ST_GEOMFROMTEXT(#{_DATA},5179),5186)) AS FLOAT) -->
<!-- 				, CAST(ST_Y(ST_TRANSFORM(ST_GEOMFROMTEXT(#{_DATA},5179),5186)) AS FLOAT) -->
<!-- 				, ST_TRANSFORM(ST_GEOMFROMTEXT(#{_DATA},5179),5186) -->
<!-- 				, #{ATTR} -->
<!-- 				, to_char(now(),'YYYY/MM/DD HH24:MI:SS') -->
<!-- 		    ) -->
<!-- 	    ]]> -->
<!-- 	</insert> -->
	
	<!-- 공유방 조사데이터 조회 -->
	<select id="selectLssBscFieldBookItemList" parameterType="or.sabang.sys.lss.bsc.service.LssBscFieldBookItemVO" resultType="or.sabang.sys.lss.bsc.service.LssBscStripLandVO">
		<![CDATA[
			SELECT
			     REGEXP_REPLACE(SVY_ATTR,'\\\\"\\\\" N"|\\\\"\\\\" E"|\d""','\""','g')::JSON->0->>'VALUE' AS ID
			     , REGEXP_REPLACE(SVY_ATTR,'\\\\"\\\\" N"|\\\\"\\\\" E"|\d""','\""','g')::JSON->1->>'VALUE' AS TYPE
				 , SPLIT_PART(ST_ASLATLONTEXT(ST_TRANSFORM(ST_GEOMFROMTEXT(SVY_DATA,5186),4326) ,'D°M''SS.SS"C'),' ',2) AS LON
			     , SPLIT_PART(ST_ASLATLONTEXT(ST_TRANSFORM(ST_GEOMFROMTEXT(SVY_DATA,5186),4326) ,'D°M''SS.SS"C'),' ',1) AS LAT
				 , REGEXP_REPLACE(SVY_ATTR,'\\\\"\\\\" N"|\\\\"\\\\" E"|\d""','\""','g')::JSON->3->>'VALUE' AS REGION1
				 , REGEXP_REPLACE(SVY_ATTR,'\\\\"\\\\" N"|\\\\"\\\\" E"|\d""','\""','g')::JSON->4->>'VALUE' AS REGION2
				 , REGEXP_REPLACE(SVY_ATTR,'\\\\"\\\\" N"|\\\\"\\\\" E"|\d""','\""','g')::JSON->5->>'VALUE' AS SD
				 , REGEXP_REPLACE(SVY_ATTR,'\\\\"\\\\" N"|\\\\"\\\\" E"|\d""','\""','g')::JSON->6->>'VALUE' AS SGG
				 , REGEXP_REPLACE(SVY_ATTR,'\\\\"\\\\" N"|\\\\"\\\\" E"|\d""','\""','g')::JSON->7->>'VALUE' AS EMD
				 , REGEXP_REPLACE(SVY_ATTR,'\\\\"\\\\" N"|\\\\"\\\\" E"|\d""','\""','g')::JSON->8->>'VALUE' AS RI
				 , REGEXP_REPLACE(SVY_ATTR,'\\\\"\\\\" N"|\\\\"\\\\" E"|\d""','\""','g')::JSON->9->>'VALUE' AS JIBUN
				 FROM  TN_FEIS_BSC_FIELDINFO
			WHERE  1=1
			AND MST_ID = CAST(#{MST_ID} AS INT)
			]]>
			<if test="svyId != null and svyId != ''">	<![CDATA[ AND
				REGEXP_REPLACE(SVY_ATTR,'\\\\"\\\\" N"|\\\\"\\\\" E"|\d""','\""','g')::JSON->0->>'VALUE' LIKE CONCAT ('%', #{svyId},'%') ]]>
			</if>
			<if test="svySd != null and svySd != ''">	<![CDATA[ AND
				REGEXP_REPLACE(SVY_ATTR,'\\\\"\\\\" N"|\\\\"\\\\" E"|\d""','\""','g')::JSON->5->>'VALUE' = (SELECT CTPRVN_NM FROM TF_FEIS_CTPRVN WHERE CTPRVN_COD = #{svySd}) ]]>
			</if>
			<if test="svySgg != null and svySgg != ''">	<![CDATA[ AND
				REGEXP_REPLACE(SVY_ATTR,'\\\\"\\\\" N"|\\\\"\\\\" E"|\d""','\""','g')::JSON->6->>'VALUE' = (SELECT SIGNGU_NM FROM TF_FEIS_SIGNGU WHERE SIGNGU_COD = #{svySgg}) ]]>
			</if>
			<if test="svyEmd != null and svyEmd != ''">	<![CDATA[ AND
				REGEXP_REPLACE(SVY_ATTR,'\\\\"\\\\" N"|\\\\"\\\\" E"|\d""','\""','g')::JSON->7->>'VALUE' = (SELECT EMD_NM FROM TF_FEIS_EMD WHERE EMD_CODE = #{svyEmd})]]>
			</if>
			<if test="svyRi != null and svyRi != ''">	<![CDATA[ AND
				 REGEXP_REPLACE(SVY_ATTR,'\\\\"\\\\" N"|\\\\"\\\\" E"|\d""','\""','g')::JSON->8->>'VALUE' =  (SELECT LI_NM FROM TF_FEIS_LI WHERE LI_CODE = #{svyRi}) ]]>
			</if>
			ORDER BY GID ASC
		LIMIT #{recordCountPerPage} OFFSET #{firstIndex}
	</select>
	
	<!-- 공유방 조사데이터 갯수조회 -->
	<select id="selectLssBscFieldBookItemListTotCnt" parameterType="or.sabang.sys.lss.bsc.service.LssBscFieldBookItemVO" resultType="int">
		<![CDATA[
			SELECT  COUNT(*) TOTCNT
			FROM  TN_FEIS_BSC_FIELDINFO
			WHERE  1=1
			AND MST_ID = CAST(#{MST_ID} AS INT)
		]]>	<if test="svyId != null and svyId != ''">	<![CDATA[ AND
				REGEXP_REPLACE(SVY_ATTR,'\\\\"\\\\" N"|\\\\"\\\\" E"|\d""','\""','g')::JSON->0->>'VALUE' LIKE CONCAT ('%', #{svyId},'%') ]]>
			</if>
			<if test="svySd != null and svySd != ''">	<![CDATA[ AND
				REGEXP_REPLACE(SVY_ATTR,'\\\\"\\\\" N"|\\\\"\\\\" E"|\d""','\""','g')::JSON->5->>'VALUE' = (SELECT CTPRVN_NM FROM TF_FEIS_CTPRVN WHERE CTPRVN_COD = #{svySd}) ]]>
			</if>
			<if test="svySgg != null and svySgg != ''">	<![CDATA[ AND
				REGEXP_REPLACE(SVY_ATTR,'\\\\"\\\\" N"|\\\\"\\\\" E"|\d""','\""','g')::JSON->6->>'VALUE' = (SELECT SIGNGU_NM FROM TF_FEIS_SIGNGU WHERE SIGNGU_COD = #{svySgg}) ]]>
			</if>
			<if test="svyEmd != null and svyEmd != ''">	<![CDATA[ AND
				REGEXP_REPLACE(SVY_ATTR,'\\\\"\\\\" N"|\\\\"\\\\" E"|\d""','\""','g')::JSON->7->>'VALUE' = (SELECT EMD_NM FROM TF_FEIS_EMD WHERE EMD_CODE = #{svyEmd})]]>
			</if>
			<if test="svyRi != null and svyRi != ''">	<![CDATA[ AND
				 REGEXP_REPLACE(SVY_ATTR,'\\\\"\\\\" N"|\\\\"\\\\" E"|\d""','\""','g')::JSON->8->>'VALUE' =  (SELECT LI_NM FROM TF_FEIS_LI WHERE LI_CODE = #{svyRi}) ]]>
			</if>
	</select>
   
   <!-- 공유방 삭제 -->
   <delete id="deleteCnrsSpce" parameterType="java.util.Map">
      	<![CDATA[
      	    DELETE FROM TN_FEIS_BSC_CNRSSPCE
      	    WHERE ID = CAST(#{id} as INT)
      	]]>
   </delete>
   
   <!-- 공유방 조사데이터 삭제 -->
   <delete id="deleteCnrsSpceItem" parameterType="java.util.Map">
  		<![CDATA[
            DELETE FROM TN_FEIS_BSC_FIELDINFO
            WHERE MST_ID = CAST(#{mst_id} AS INT)
            AND SVY_LABEL = #{label}
        ]]>
   </delete>
   
   <!-- 공유방 조사데이터 일괄삭제 -->
   <delete id="deleteCnrsSpceAllItem" parameterType="java.util.Map">
      	<![CDATA[
      	    DELETE FROM TN_FEIS_BSC_FIELDINFO
      	    WHERE MST_ID = CAST(#{id} AS INT)
      	]]>
   </delete>
   
   <!-- 공유방 조사 완료데이터 삭제 -->
   <delete id="deleteCnrsSpceComptItem" parameterType="java.util.Map">
        <![CDATA[
            DELETE FROM TN_FEIS_BSC_SVYCOMPT
            WHERE MST_ID = CAST(#{id} AS INT)
        ]]>
   </delete>
   
   <!-- 공유방 조사데이터 수정조회 완료여부 추가 -->
	<select id="selectLssBscFieldBookItemView" parameterType="or.sabang.sys.lss.bsc.service.LssBscFieldBookItemVO" resultType="or.sabang.sys.lss.bsc.service.LssBscStripLandVO">
		<![CDATA[
			SELECT
			     REGEXP_REPLACE(T1.SVY_ATTR,'\\\\"\\\\" N"|\\\\"\\\\" E"|\d""','\""','g')::JSON->0->>'VALUE' AS ID
			     , REGEXP_REPLACE(T1.SVY_ATTR,'\\\\"\\\\" N"|\\\\"\\\\" E"|\d""','\""','g')::JSON->1->>'VALUE' AS TYPE
				 , SPLIT_PART(ST_ASLATLONTEXT(ST_TRANSFORM(ST_GEOMFROMTEXT(T1.SVY_DATA,5186),4326) ,'D°M''SS.SS"C'),' ',2) AS LON
			     , SPLIT_PART(ST_ASLATLONTEXT(ST_TRANSFORM(ST_GEOMFROMTEXT(T1.SVY_DATA,5186),4326) ,'D°M''SS.SS"C'),' ',1) AS LAT
				 , REGEXP_REPLACE(T1.SVY_ATTR,'\\\\"\\\\" N"|\\\\"\\\\" E"|\d""','\""','g')::JSON->3->>'VALUE' AS REGION1
				 , REGEXP_REPLACE(T1.SVY_ATTR,'\\\\"\\\\" N"|\\\\"\\\\" E"|\d""','\""','g')::JSON->4->>'VALUE' AS REGION2
				 , REGEXP_REPLACE(T1.SVY_ATTR,'\\\\"\\\\" N"|\\\\"\\\\" E"|\d""','\""','g')::JSON->5->>'VALUE' AS SD
				 , REGEXP_REPLACE(T1.SVY_ATTR,'\\\\"\\\\" N"|\\\\"\\\\" E"|\d""','\""','g')::JSON->6->>'VALUE' AS SGG
				 , REGEXP_REPLACE(T1.SVY_ATTR,'\\\\"\\\\" N"|\\\\"\\\\" E"|\d""','\""','g')::JSON->7->>'VALUE' AS EMD
				 , REGEXP_REPLACE(T1.SVY_ATTR,'\\\\"\\\\" N"|\\\\"\\\\" E"|\d""','\""','g')::JSON->8->>'VALUE' AS RI
				 , REGEXP_REPLACE(T1.SVY_ATTR,'\\\\"\\\\" N"|\\\\"\\\\" E"|\d""','\""','g')::JSON->9->>'VALUE' AS JIBUN
				 , (COALESCE(NULLIF(REPLACE(T2.SVY_MEMO ,'\\','\'),''),'{}'))::JSON->>'완료' AS AT
		    FROM  TN_FEIS_BSC_FIELDINFO T1
			LEFT OUTER JOIN TN_FEIS_BSC_SVYCOMPT T2
				ON T1.MST_ID = T2.MST_ID
				AND T1.SVY_LABEL = T2.SVY_LABEL
			WHERE  1=1
			AND T1.MST_ID = CAST(#{MST_ID} AS INT)
		]]>
	</select>
	
	<!-- 공유방 최대연도 조회 -->
	<select id ="selectLssBscFieldBookMaxYear" resultType="String">
		SELECT MAX(SPLIT_PART((SPLIT_PART(MST_REGISTERED, ' ',1)),'/',1)) AS svyYear FROM TN_FEIS_BSC_CNRSSPCE
	</select>

	<!-- 공유방 연도목록 조회 -->	
	<select id ="selectLssBscFieldBookYear" resultType="egovMap">
		SELECT DISTINCT SPLIT_PART((SPLIT_PART(MST_REGISTERED, ' ',1)),'/',1) AS svyYear FROM TN_FEIS_BSC_CNRSSPCE
		ORDER BY svyYear DESC
	</select>
	
		<!-- 사업지구명 중복체크 -->
	<select id="selectLssBscFieldBookCheckMstName" resultType="int" parameterType="String">
		SELECT COUNT(MST_PARTNAME) FROM TN_FEIS_BSC_CNRSSPCE WHERE MST_PARTNAME=#{MST_PARTNAME}
	</select>
	
</mapper>